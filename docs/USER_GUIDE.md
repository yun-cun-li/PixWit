# PixWit 使用手册

欢迎使用 PixWit！本手册涵盖所有主要功能的使用说明。

**适用版本**：PixWit 1.1.x 及以上

---

## 📋 目录

- [截图功能](#-截图功能)
- [录屏功能](#-录屏功能)
- [图片处理](#-图片处理)
- [视频处理](#-视频处理)
- [OCR 文字识别](#-ocr-文字识别)
- [图片翻译](#-图片翻译)
- [配置文件管理](#-配置文件管理)
- [快捷键汇总](#-快捷键汇总)
- [常见问题](#-常见问题)

---

## 📸 截图功能

### 快速开始

- **F1**：区域截图（冻结画面后拖动选择区域）
- **F2**：全屏截图（当前鼠标所在屏幕）
- **Ctrl+Shift+A**：截图后自动进入箭头标注模式

*具体快捷键可在托盘菜单"快捷键设置"中自定义*

### 区域选择

1. 按 **F1** 冻结屏幕
2. 拖动鼠标绘制矩形选区
3. 拖动边缘或角点调整大小
4. 拖动选区内部移动位置
5. **右键** / **Enter** / **Space** 确认，**ESC** 取消

### 编辑工具 🎨

截图后自动打开编辑窗口，提供以下工具：

| 工具 | 快捷键 | 说明 |
|-----|--------|------|
| 箭头 | - | 方向指示 |
| 画笔 | - | 自由绘画 |
| 矩形 | - | 绘制矩形框 |
| 圆形 | - | 绘制圆形/椭圆 |
| 直线 | - | 绘制直线 |
| 马赛克 | - | 打码敏感信息 |
| 文字 | - | 添加文字说明 |

**操作提示：**
- 点击工具按钮查看颜色和粗细选择器
- **Ctrl+Z**：撤销上一步操作
- **Ctrl+S**：保存截图
- **Ctrl+C**：复制到剪贴板
- **ESC**：关闭编辑窗口

### 特色功能

- **贴图到桌面**：点击"贴图"按钮，截图变为桌面便签
- **OCR 文字识别**：点击"OCR"按钮，识别图片中的文字
- **AI 智能翻译**：点击"翻译"按钮，自动识别并翻译图片文字
- **自动保存历史**：所有截图自动保存到历史文件夹
- **历史记录查看**：托盘菜单 → 历史截图

---

## 🎬 录屏功能

### 区域录制

#### 快速开始
1. 按 **F3**（默认快捷键）启动区域录制
2. 拖动鼠标绘制录制区域
3. 点击"开始录制"按钮，3秒倒计时
4. 按 **F8**（默认快捷键）停止录制

#### 录制控制
- **F7**：暂停/继续录制
- **F8**：停止录制
- **ESC**：
  - 标注模式下：退出标注，恢复鼠标
  - 非标注模式下：立即停止录制

#### 录制时标注 🎨

在录制过程中可实时标注画面：

| 快捷键 | 功能 |
|--------|------|
| **Alt+1** | 画线条 |
| **Alt+2** | 画箭头 |
| **Alt+3** | 画圆形 |
| **Alt+4** | 画矩形 |
| **Alt+0** | 退出标注模式 |

**标注提示：**
- 标注会实时嵌入录制画面
- 标注期间鼠标被占用
- 按 **Alt+0** 或工具栏"穿透"按钮恢复鼠标

### 全屏录制

1. 主界面点击"录屏"按钮
2. 选择"全屏录制"
3. 选择要录制的屏幕（多屏用户）
4. 按 **F8** 停止录制

### 音频设置 🎤

**智能音频检测：**
- 自动检测系统音频和麦克风状态
- 首次录制时会提示音频源设置
- 建议使用"虚拟音频线"录制系统声音

**音频选项：**
- **仅麦克风**：录制解说
- **仅系统声音**：录制游戏/视频声音
- **麦克风+系统**：混音录制
- **静音**：不录制声音

*详细音频设置请参考 `docs/SMART_AUDIO_DETECTION.md`*

---

## 🖼️ 图片处理

### 打开图片

1. 主界面点击"打开图片/视频"按钮
2. 选择图片文件
3. 在图片查看器中进行编辑

### 图片编辑工具

| 功能 | 说明 |
|-----|------|
| **裁剪** | 选择保留区域，去除多余部分 |
| **旋转** | 顺时针/逆时针旋转 90° |
| **矫正** | 透视矫正，拍照文档纠偏 |
| **标注** | 箭头、文字等标注工具 |
| **OCR** | 文字识别 |

### 格式转换

**支持格式：**
- PNG - 无损压缩，支持透明
- JPEG/JPG - 适合照片
- WebP - 体积小，高质量
- BMP - 位图格式
- SVG - 矢量图
- ICO - 图标格式

**转换方法：**
1. 打开图片
2. 点击"保存"按钮
3. 在"保存类型"下拉框中选择目标格式
4. 点击"保存"完成转换

---

## 🎞️ 视频处理

### 打开视频

1. 主界面点击"打开图片/视频"按钮
2. 选择视频文件（支持：mp4/avi/mov/mkv/flv/wmv 等）
3. 自动打开视频编辑窗口

### 视频裁剪 ✂️

#### 时间轴操作
- **Ctrl + 鼠标滚轮**：缩放时间轴（以鼠标为中心）
- **鼠标滚轮**（不按Ctrl）：水平滚动查看
- **缩放范围**：10% ~ 1000%

#### 裁剪步骤
1. 拖动时间轴上的**左滑块**到起始位置
2. 拖动**右滑块**到结束位置
3. 点击"**播放选区**"预览效果
4. 点击"**保存裁剪**"导出片段

**裁剪提示：**
- 绿色区域为保留片段
- 灰色区域为删除部分
- 选区时长显示在底部

### 视频压缩 🗜️

**自动压缩：**
1. 打开视频
2. 点击"**压缩**"按钮
3. 选择压缩级别：
   - **高质量**（CRF 23）- 轻微压缩
   - **平衡**（CRF 28）- 推荐
   - **高压缩**（CRF 32）- 显著减小体积
4. 等待压缩完成

**参数说明：**
- CRF 值越大，压缩率越高，质量越低
- 一般可减小 50%-80% 体积
- 保持原始分辨率和帧率

### 视频格式转换

**当前支持：**
- 保存时自动选择 MP4 格式（兼容性最好）
- 使用 H.264 编码（通用）

*更多格式转换功能持续开发中*

---

## 🔍 OCR 文字识别

### 使用方法

#### 方法1：截图后识别
1. 按 **F1** 截图
2. 点击工具栏"**OCR**"按钮
3. 等待识别完成
4. 查看结果窗口（自动复制到剪贴板）

#### 方法2：打开图片识别
1. 主界面点击"打开图片/视频"
2. 选择包含文字的图片
3. 点击工具栏"**OCR**"按钮
4. 查看识别结果

### OCR 服务选择

PixWit 支持两种 OCR 识别方式：

#### 🖥️ 本地 OCR（默认）
**优点：**
- ✅ 完全离线，无需联网
- ✅ 隐私安全，数据不上传
- ✅ 识别速度快（约1-2秒）
- ✅ 免费使用

**首次使用：**
- 首次使用会提示下载识别模型（~18MB）
- 下载窗口非模态，可继续使用其他功能
- 下载完成后系统通知
- 模型保存在应用目录 `models/` 文件夹

#### ☁️ 百度 OCR 云服务（可选）
**优点：**
- ✅ 无需下载模型
- ✅ 识别准确率更高
- ✅ 支持更多场景（手写、表格等）
- ⚠️ 需要联网
- ⚠️ 需要百度云账号和 API 密钥

**配置方法：**
1. 系统托盘右键 → **AI 服务配置**
2. 找到"**百度 OCR 配置**"区域
3. 勾选"**启用百度 OCR 服务**"
4. 填入 **API Key** 和 **Secret Key**
5. 点击"**测试连接**"验证配置
6. 点击"**保存**"

**获取 API 密钥：**
- 访问：https://cloud.baidu.com/product/ocr
- 注册并创建应用
- 复制 API Key 和 Secret Key

> 💡 **提示**：启用百度 OCR 后，点击 OCR 和翻译按钮时会自动使用云服务，无需本地模型。

### 识别结果

**结果窗口功能：**
- **左侧**：原图预览（可隐藏）
- **右侧**：识别的文字
- **自动复制**：结果已复制到剪贴板
- **编辑**：可直接修改识别文字
- **保存**：导出为 TXT 文件
- **显示控制**：点击"隐藏图片"按钮可切换视图

**识别支持：**
- ✅ 中文识别（简体）
- ✅ 英文识别
- ✅ 数字识别
- ✅ 多行文本
- ✅ 表格识别（百度 OCR）
- ⚠️ 手写识别（百度 OCR 效果更好）

---

## 🌐  图片翻译

### 快速开始

1. 按 **F1** 截取包含外语文字的图片
2. 点击工具栏"**翻译**"按钮（🌐 图标）
3. 自动识别文字并翻译成中文
4. 查看翻译结果窗口

### 翻译流程

**翻译按钮会自动完成：**
1. 📷 OCR 识别图片中的文字
2. 🌐 调用 AI 服务进行翻译
3. 📝 展示原文和译文对照

### 翻译服务配置

**前置条件：**
- 需要配置 **DeepSeek** 或 **通义千问** 翻译服务
- 在系统托盘 → **AI 服务配置** 中设置

**推荐服务：**
- **DeepSeek**（推荐）：性价比高，翻译质量好
- **通义千问**：阿里云服务，速度快

### 翻译结果窗口

**布局说明：**
- **上方**：原文内容
- **下方**：中文翻译
- **左侧**：原图预览（可选）

**窗口控制：**
- **隐藏图片**：只显示文字内容
- **隐藏原文**：只看翻译结果
- **显示全部**：图片、原文、译文全部显示

> 💡 **智能记忆**：窗口会记住您上次的显示偏好设置

### 翻译优化

**性能优化：**
- ✅ 启用 HTTP/2 加速网络传输
- ✅ 智能 Token 控制，降低 API 成本
- ✅ 10秒超时保护，避免长时间等待
- ✅ 连接复用，提升响应速度

**预计速度：**
- 短文本（<100字）：约 1-1.5 秒
- 中等文本（100-300字）：约 2-3 秒
- 长文本（>500字）：约 3-5 秒

---

## ⚙️ AI 服务配置

### 配置入口

**打开方式：**
- 系统托盘右键 → **AI 服务配置**

### 配置服务

#### 1️⃣ DeepSeek 配置（推荐用于翻译）

**功能：** 图片翻译

**配置项：**
- **启用服务**：勾选后启用
- **API Key**：您的 DeepSeek API 密钥
- **Base URL**：默认 `https://api.deepseek.com`
- **Model**：选择模型（推荐 `deepseek-chat`）

**获取 API Key：**
- 访问：https://platform.deepseek.com
- 注册账号并创建 API Key
- 新用户有免费额度

#### 2️⃣ 通义千问配置（翻译备选）

**功能：** 图片翻译

**配置项：**
- **启用服务**：勾选后启用
- **API Key**：您的阿里云 API Key
- **Base URL**：默认已配置
- **Model**：选择模型（推荐 `qwen-max`）

**获取 API Key：**
- 访问：https://dashscope.aliyuncs.com
- 使用阿里云账号登录
- 创建 API Key

#### 3️⃣ 百度 OCR 配置（文字识别）

**功能：** 云端 OCR 识别

**配置项：**
- **启用服务**：勾选后替代本地 OCR
- **API Key**：百度云 API Key
- **Secret Key**：百度云 Secret Key

**获取密钥：**
- 访问：https://cloud.baidu.com/product/ocr
- 创建应用获取密钥

### 测试连接

**验证配置：**
1. 填写完配置信息
2. 点击对应服务的"**测试连接**"按钮
3. 等待测试结果
4. 显示"✅ 连接成功"表示配置正确

### 保存配置

- 点击"**保存**"按钮
- 配置立即生效
- 下次使用时无需重新配置

---

## 📁 配置文件管理

### 配置文件位置

**Windows 系统路径：**
```
C:\Users\您的用户名\AppData\Roaming\PixWit\config.json
```

**快速打开：**
1. 按 `Win + R`
2. 输入：`%APPDATA%\PixWit`
3. 按回车即可看到 `config.json`

### 配置文件内容

配置文件是 JSON 格式，可以直接用文本编辑器打开和编辑：

```json
{
  "version": "1.0.0",
  "aiServices": {
    "deepseek": {
      "enabled": false,
      "apiKey": "",
      "baseUrl": "https://api.deepseek.com",
      "model": "deepseek-chat"
    },
    "baiduOcr": {
      "enabled": true,
      "apiKey": "您的密钥",
      "secretKey": "您的密钥"
    }
  },
  "screenshot": {
    "lastTextColor": "#FF0000",
    "lastThickness": 3
  },
  "window": {
    "translationImageVisible": true,
    "ocrImageVisible": true
  }
}
```

### 配置管理

**备份配置：**
- 复制 `config.json` 文件到其他位置

**恢复配置：**
- 将备份的 `config.json` 覆盖到原位置
- 重启 PixWit 生效

**重置配置：**
- 删除 `config.json` 文件
- 重启程序会自动创建默认配置

**迁移配置：**
- 更换电脑时，直接复制 `config.json` 到新电脑
- 路径保持一致即可

> 💡 **优势**：相比注册表，JSON 配置文件更易查看、备份和迁移！

---

## ⌨️ 快捷键汇总

### 全局快捷键

| 快捷键 | 功能 |
|--------|------|
| **F1** | 区域截图 |
| **F2** | 全屏截图 |
| **F3** | 启动区域录制 |
| **F7** | 暂停/继续录制 |
| **F8** | 停止录制 |


### 编辑窗口快捷键

| 快捷键 | 功能 |
|--------|------|
| **Ctrl+Z** | 撤销 |
| **Ctrl+S** | 保存 |
| **Ctrl+C** | 复制到剪贴板 |
| **ESC** | 关闭窗口 |

### 录制标注快捷键

| 快捷键 | 功能 |
|--------|------|
| **Alt+1** | 画线条 |
| **Alt+2** | 画箭头 |
| **Alt+3** | 画圆形 |
| **Alt+4** | 画矩形 |
| **Alt+0** | 退出标注 |
| **ESC** | 停止录制（非标注模式） |

### 视频编辑快捷键

| 快捷键 | 功能 |
|--------|------|
| **Ctrl + 滚轮** | 缩放时间轴 |
| **滚轮** | 滚动时间轴 |
| **Space** | 播放/暂停 |

*更多快捷键可在"快捷键设置"中自定义*

---

## ❓ 常见问题

### 截图相关

**Q：截图快捷键无效？**
- 检查托盘菜单 → 快捷键设置，确认已启用
- 可能被其他软件占用，尝试更换快捷键

**Q：多屏环境下如何截图？**
- 鼠标移动到目标屏幕后按快捷键
- 会自动在鼠标所在屏幕截图

**Q：截图历史保存在哪里？**
- 路径：`%APPDATA%\PixWit\ScreenshotHistory\images\`
- 托盘菜单 → 历史截图，一键打开

### 录屏相关

**Q：录屏无声音？**
- 首次录制会提示音频设置
- 需要安装"虚拟音频线"录制系统声音
- 参考：`docs/SMART_AUDIO_DETECTION.md`

**Q：录屏文件很大？**
- 录制后使用"压缩"功能
- 或使用更低的录制帧率（设置中）

**Q：区域录制边框闪烁？**
- 可在"录制设置"中隐藏边框

### OCR 相关

**Q：OCR 无法下载模型？**
- 检查网络连接
- 模型托管在 Gitee，国内访问较快
- 如果失败，可重新点击"OCR"按钮
- 或者使用百度 OCR 云服务（无需下载模型）

**Q：OCR 识别不准确？**
- 确保图片清晰，文字足够大
- 避免复杂背景
- 手写识别效果一般
- 建议启用百度 OCR 云服务以获得更好效果

**Q：如何切换 OCR 服务？**
- 系统托盘 → AI 服务配置
- 勾选/取消"启用百度 OCR 服务"
- 保存后立即生效

### 图片翻译相关

**Q：翻译功能需要什么？**
- 需要配置 DeepSeek 或通义千问服务
- 系统托盘 → AI 服务配置中设置
- 需要申请对应的 API Key

**Q：翻译速度慢怎么办？**
- 已进行多项优化（HTTP/2、连接复用等）
- 翻译时间主要取决于 AI 服务响应
- 一般短文本 1-2 秒完成

**Q：翻译要收费吗？**
- DeepSeek 和通义千问都有免费额度
- 新用户注册后可免费使用
- 超出免费额度后按量计费

**Q：配置文件在哪里？**
- 路径：`%APPDATA%\PixWit\config.json`
- 按 Win+R，输入上述路径可直接打开
- 可以手动编辑，重启程序生效

### 兼容性问题

**Q：Windows 7 无法运行？**
- PixWit 基于 Qt 6，**仅支持 Windows 10/11**
- Windows 7 不支持，建议升级系统

**Q：启动时崩溃（0xc0000005）？**
- 确认系统版本为 Windows 10 1809 或更高
- 检查是否缺少 VC++ Redistributable
- 运行 `check_system_dependencies.bat` 检测

### 其他问题

**Q：如何设置开机自启动？**
- 托盘菜单 → 开机自动启动（打勾）

**Q：如何隐藏贴图边框？**
- 托盘菜单 → 隐藏贴图边框（打勾）

**Q：如何反馈问题？**
- 托盘菜单 → 反馈与建议
- 加入 QQ 群：**133125470**

---

## 🎯 使用技巧

### 截图技巧
- 使用 **Ctrl+Shift+A/R/T** 快捷键可直接进入对应标注模式
- 截图后按住 **Shift** 拖动可等比缩放选区
- 双击编辑窗口外部区域可快速关闭

### 录屏技巧
- 录制前关闭不必要的通知避免录入
- 使用"标注"功能可实时圈重点
- 暂停功能可用于分段录制再合并

### AI 功能技巧
- **翻译外语文档**：截图文档后点击翻译，省去手动输入
- **快速提取文字**：OCR + 剪贴板，比手打快得多
- **切换 OCR 服务**：重要文档用百度 OCR（更准），普通文档用本地 OCR（更快）
- **窗口视图优化**：翻译/OCR 窗口可隐藏图片，专注看文字
- **配置备份**：定期备份 `config.json`，换电脑直接拷贝

### 效率技巧
- 善用"贴图"功能做临时参考
- OCR 结果自动复制到剪贴板，识别后直接粘贴
- 视频编辑时用 Ctrl+滚轮快速定位精确帧
- 翻译窗口会记住显示偏好，无需每次调整

---

## 📞 获取帮助

- **QQ 交流群**：133125470
- **项目主页**：https://gitee.com/bjs1999/PixWit 或  https://github.com/yun-cun-li/PixWit
- **问题反馈**：https://gitee.com/bjs1999/PixWit/issues 或  https://github.com/yun-cun-li/PixWit/issues

---

**感谢使用 PixWit！** 🎉

*如有任何问题或建议，欢迎随时反馈！*

